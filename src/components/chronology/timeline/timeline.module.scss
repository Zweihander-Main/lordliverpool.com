@use '~styles/util/variables.global' as v;
@use '~styles/util/mixins.global' as m;
@use '../chronology.module.scss' as c;

$area-grabber-height: c.$timeline-height-short;
$area-grabber-height-shorter: c.$timeline-height-shorter;
$area-grabber-opacity: 0.3;

.timeline {
	align-items: flex-end;
	color: v.$white;
	display: flex;
	flex-direction: row;
	grid-row: 3;
	justify-content: space-around;

	@include m.media('portrait') {
		display: none; // TODO build this out
	}
} // TODO bug with scrollbar hiding last tick?

.area-grabber {
	@include m.neumorphic-button(
		4px,
		8px,
		rgba(v.$white, $area-grabber-opacity + 0.1),
		20%
	);

	background: rgba(v.$white, $area-grabber-opacity);
	cursor: grab;
	height: $area-grabber-height;
	left: 0;
	position: absolute;
	transition: width 100ms v.$timing-function; //TODO test phone and check if 5ms left transition is good/bad
	user-select: none;
	will-change: width, transform;
	z-index: 9999;

	@include m.media('height<=HEIGHT_shorter') {
		height: $area-grabber-height-shorter;
	}

	&:hover {
		@extend %active-timeline;
	}
}

.is-scrolling {
	@extend %active-timeline;
}

.is-user-dragging {
	cursor: ew-resize;
}

.year {
	color: v.$light-bg;
	font-family: v.$header-font;
	font-size: v.$chrono-year-size;
	font-style: italic;
	position: absolute;
	top: calc(-#{v.$chrono-year-size} - 4px);
	user-select: none;
	white-space: nowrap;
	will-change: transform;
	transition: opacity 200ms v.$timing-function;

	@include m.media('height<=HEIGHT_short') {
		opacity: 0.3;
		font-size: 1.75rem; //TODO var
		top: calc(-1.75rem - 3px);
	}

	@include m.media('height<=HEIGHT_shorter') {
		font-size: 1.5rem; //TODO var
		top: calc(-1.5rem - 2px);
	}
}

%active-timeline {
	@include m.media('height<=HEIGHT_short') {
		.year {
			opacity: 1;
		}
	}
}

.tick {
	@include m.neumorphic-intensity(1px, 2px, v.$blue-bg, 250%); //TODO nope

	background: v.$blue-bg;
	height: $area-grabber-height - 15;
	width: 3px;

	@include m.media('height<=HEIGHT_shorter') {
		height: $area-grabber-height-shorter - 15;
	}
}

.tick:nth-of-type(2n) {
	height: $area-grabber-height - 25;
	@include m.media('height<=HEIGHT_shorter') {
		height: $area-grabber-height-shorter - 25;
	}
}
